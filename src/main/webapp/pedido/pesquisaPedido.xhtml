<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:o="http://omnifaces.org/ui">

    <ui:define name="titulo">Pesquisa Pedido</ui:define>

    <ui:define name="corpo">

        <p:panel header="Pesquisa Pedido">

            <h:form id="formPesquisa">
        <p:messages id="messages" autoUpdate="true" closable="true"/>
                <p:toolbar style="margin-top: 20px">
                        <p:toolbarGroup style="float: left">
                            <p:commandButton icon="pi pi-search" value="Pesquisar" />
                        </p:toolbarGroup>

                        <p:toolbarGroup style="float: right">
                            <p:button icon="pi pi-file" value="Novo"/>
                        </p:toolbarGroup>
                </p:toolbar>



                <p:panelGrid columns="2"  styleClass="ui-noborder">


                    <p:outputLabel value="Numero" for="nu" />
                    <p:inputText value="#{pesquisaPedidoController.pedidoFiltroDTO.numero}" id="nu" />

                   <!-- <p:outputLabel value="Código de barras" for="codBarras"/>
                    <p:inputText value="" id="codBarras"/>-->

                   <!-- <p:outputLabel value="Data Criação" for="de" />
                    <p:calendar id="de"  showOn="button" />-->


                   <!-- <p:outputLabel value="Vendedor" for="vd"/>
                    <p:inputText value="" id="vd" />-->
                </p:panelGrid>



            <p:dataTable value="#{pesquisaPedidoController.lazyPedido}" var="pedido"
            paginator="true"  lazy="true" rows="5">

                <f:facet name="header">
                    <span>Total de Pedidos:
                    <h:outputText value="#{pesquisaPedidoController.lazyPedido.rowCount}"
                                  style="font-weight: bold"/>
                    </span>
                </f:facet>
                <p:column headerText="Ação" style="width: 4%">
                    <p:commandButton icon="pi pi-pencil" title="Editar"/>
                </p:column>

                <p:column headerText="Numero">
                    <h:outputText disabled="true" id="numero" value="#{pedido.numero}"/>
                </p:column>

                <p:column headerText="Itens">
                    <p:commandButton icon="pi pi-eye" action="#{pesquisaPedidoController.detalheItemPedido()}"
                    oncomplete="PF('detalhePedido').show()"
                    process="@this" update=":formPesquisa:detPedido">


                    <f:setPropertyActionListener target="#{pesquisaPedidoController.pedidoSelecionado}" value="#{pedido}"/>
                    </p:commandButton>
                </p:column>

<!--                <p:column headerText="Pagamento">-->
<!--                    <p:inputText disabled="true" id="pg" value="#{pedido.pagamento}"/>-->
<!--                </p:column>-->

                <p:column headerText="Total">
                    <h:outputText disabled="true"  value="#{pedido.valorTotal}"/>
                </p:column>

                <p:column headerText="Data Criação">
                    <h:outputText disabled="true"  value="#{pedido.data}"/>
                </p:column>



            </p:dataTable>


                <p:dialog id="detPedido" header="Resumo" widgetVar="detalhePedido" modal="true"
                        styleClass="ui-dialog"  closable="true">
                    <p:dataTable value="#{pesquisaPedidoController.itemPedidoDetalheDTOS}" var="ped">

                        <p:column headerText="Numero">
                            <h:outputText value="#{ped.id}"/>
                        </p:column>

                        <p:column headerText="Produto">
                            <h:outputText value="#{ped.nomeProduto}"/>
                        </p:column>

                        <p:column headerText="qtd">
                            <h:outputText value="#{ped.qtd}"/>
                        </p:column>

                        <p:column headerText="Vl Únitario">
                            <h:outputText value="#{ped.valorUnitario}"/>
                        </p:column>

                        <p:column headerText="Vl Total">
                            <h:outputText value="#{ped.valorTotal}"/>
                        </p:column>



                    </p:dataTable>
                    <!--  <p:dataList value="#{pesquisaPedidoController.itemPedidoDetalheDTOS}" var="ped"
                      rendered="#{not empty pesquisaPedidoController.itemPedidoDetalheDTOS}">
                          #{ped.nomeProduto}

                      </p:dataList>-->
                    <!--                <h:outputText value="Nenhum Item selecionado" rendered="#{empty pesquisaPedidoController.itemPedidoDetalheDTOS}"/>-->
                </p:dialog>

            </h:form>



        </p:panel>


    </ui:define>

</ui:composition>
